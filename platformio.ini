; PlatformIO Project Configuration File
; ESP32-S3-Touch-LCD-2 Christmas Lights Controller

[env:esp32s3-touch-lcd-2]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200

; ESP32-S3 specific settings
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.flash_mode = qio
board_build.flash_size = 16MB
board_build.partitions = huge_app.csv

; PSRAM support
board_build.arduino.memory_type = qio_opi

; USB CDC for serial output
build_flags =
    -D ARDUINO_USB_MODE=1
    -D ARDUINO_USB_CDC_ON_BOOT=1
    -D CONFIG_ASYNC_TCP_RUNNING_CORE=1
    -D CONFIG_ASYNC_TCP_USE_WDT=0
    ; LVGL configuration - include path for lv_conf.h
    -I include
    -D LV_CONF_INCLUDE_SIMPLE
    -D LV_LVGL_H_INCLUDE_SIMPLE
    -D LV_TICK_CUSTOM=1
    ; Display configuration
    -D TFT_WIDTH=240
    -D TFT_HEIGHT=320
    ; ESP32-S3 specific
    -D BOARD_HAS_PSRAM
    -D CONFIG_SPIRAM_CACHE_WORKAROUND
    ; FastLED ESP32-S3 RMT driver
    -D FASTLED_RMT_BUILTIN_DRIVER=1
    -D FASTLED_ESP32_FLASH_LOCK=1

lib_deps =
    fastled/FastLED@^3.6.0
    mathieucarbou/AsyncTCP@^3.2.14
    mathieucarbou/ESPAsyncWebServer@^3.3.23
    bblanchon/ArduinoJson@^7.0.0
    moononournation/GFX Library for Arduino@^1.5.0
    lvgl/lvgl@^8.3.11

; File system for fallback
board_build.filesystem = littlefs
